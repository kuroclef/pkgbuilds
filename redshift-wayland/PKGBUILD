# Maintainer : Kazumi Moriya <kuroclef@gmail.com>

pkgname=redshift-wayland
pkgver=latest
pkgrel=1
pkgdesc='Redshift fork supporting color temperature adjustment with wlroots.'
arch=(x86_64)
url=https://github.com/minus7/redshift
license=(GPL3)
depends=(geoclue2 libdrm libxcb libxxf86vm)
makedepends=(intltool python wayland)
source=(git://github.com/minus7/redshift.git)
md5sums=(SKIP)

pkgver() {
  cd redshift
  git describe --long --tags | sed 's/^v//;s/-/.r/;s/-/./g'
}

build() {
  cd redshift
  ./bootstrap
  ./configure --prefix=/usr --enable-drm --enable-randr --enable-vidmode --enable-geoclue2 --enable-wayland --with-systemduserunitdir=/usr/lib/systemd/user
  make
}

package() {
  cd redshift
  make DESTDIR="$pkgdir" install
}
